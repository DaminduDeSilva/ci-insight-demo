name: CI Insight Demo
on: [push, workflow_dispatch]

jobs:
  demo-pipeline:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Make agent executable
        run: chmod +x agent/insight-shell.sh
        
      - name: Run Monitored Commands
        env:
          BACKEND_URL: ${{ secrets.BACKEND_URL }}
        # shell: bash ${{ github.workspace }}/agent/insight-shell.sh {0}
        run: |
          echo "Debugging: Listing files"
          ls -R
          
          echo "Running Manual Wrapper Test..."
          ./agent/insight-shell.sh "npm --version"
          ./agent/insight-shell.sh "node --version"
          ./agent/insight-shell.sh "echo 'Manual Build Step'"
